<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vacation Planner</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Sparkle background -->
  <canvas id="sparkleCanvas" aria-hidden="true"></canvas>

  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="brand-badge" aria-hidden="true">✨</div>
        <div>
          <div class="brand-title">Vacation Planner</div>
          <div class="brand-sub">Bright • Simple • Ready to plan</div>
        </div>
      </div>

      <div class="topbar-actions">
        <button class="btn ghost" id="btnExportJSON" title="Export your plan as a backup file">Export Backup</button>
        <label class="btn ghost" title="Import a backup file">
          Import Backup
          <input id="fileImportJSON" type="file" accept="application/json" hidden />
        </label>
        <button class="btn" id="btnExportICS" title="Export itinerary to calendar (.ics)">Export Calendar</button>
        <button class="btn ghost" id="btnReset" title="Reset this device (cannot be undone)">Reset</button>
      </div>
    </header>

    <main class="layout">
      <!-- Left panel -->
      <aside class="panel card">
        <h2>Trip Snapshot</h2>

        <div class="field">
          <label for="tripName">Trip Name</label>
          <input id="tripName" type="text" placeholder="Family Vacation" />
        </div>

        <div class="row">
          <div class="field">
            <label for="startDate">Start</label>
            <input id="startDate" type="date" />
          </div>
          <div class="field">
            <label for="endDate">End</label>
            <input id="endDate" type="date" />
          </div>
        </div>

        <div class="field">
          <label for="resortSelect">Resort / Hotel</label>
          <select id="resortSelect"></select>
        </div>

        <div class="row">
          <div class="field">
            <label for="partySize">Party Size</label>
            <input id="partySize" type="number" min="1" max="30" />
          </div>
          <div class="field">
            <label for="budget">Budget ($)</label>
            <input id="budget" type="number" min="0" step="1" />
          </div>
        </div>

        <div class="field">
          <label for="welcomeMsg">Welcome Message</label>
          <textarea id="welcomeMsg" rows="3" placeholder="Welcome! Let’s plan your trip ✨"></textarea>
        </div>

        <div class="miniStats">
          <div class="miniStat">
            <div class="miniLabel">Planned items</div>
            <div class="miniValue" id="statItems">0</div>
          </div>
          <div class="miniStat">
            <div class="miniLabel">Estimated cost</div>
            <div class="miniValue" id="statCost">$0</div>
          </div>
          <div class="miniStat">
            <div class="miniLabel">Budget left</div>
            <div class="miniValue" id="statLeft">$0</div>
          </div>
        </div>

        <div class="hint">
          Tip: Everything auto-saves on this device. Export a backup before switching devices.
        </div>
      </aside>

      <!-- Right panel -->
      <section class="content card">
        <div class="hero">
          <div class="heroTitle" id="heroWelcome">Welcome! ✨</div>
          <div class="heroMeta">
            <span class="pill" id="heroDates">Dates: —</span>
            <span class="pill" id="heroResort">Resort: —</span>
            <span class="pill" id="heroParty">Party: —</span>
          </div>
          <div class="heroDesc" id="heroDesc">
            Build your days, pack your stuff, keep activities, maps, dining, and hidden finds — and export your calendar.
          </div>
        </div>

        <nav class="tabs" role="tablist" aria-label="Planner tabs">
          <button class="tab active" data-tab="itinerary" role="tab">Itinerary</button>
          <button class="tab" data-tab="packing" role="tab">Packing</button>
          <button class="tab" data-tab="notes" role="tab">Notes</button>
          <button class="tab" data-tab="activities" role="tab">Activities</button>
          <button class="tab" data-tab="dining" role="tab">Dining</button>
          <button class="tab" data-tab="maps" role="tab">Maps</button>
          <button class="tab" data-tab="hidden" role="tab">Hidden Finds</button>
        </nav>

        <div class="toolbar">
          <div class="toolGroup">
            <div class="toolLabel">Filter Park</div>
            <select id="filterPark"></select>
            <button class="btn ghost" id="btnClearFilter">Clear</button>
          </div>

          <div class="toolGroup">
            <div class="toolLabel">Add Park Day</div>
            <select id="addDayPark"></select>
            <button class="btn" id="btnAddDay">+ Add</button>
          </div>

          <div class="toolGroup right">
            <div class="subtle" id="saveStatus">Saved on this device.</div>
          </div>
        </div>

        <!-- Panels -->
        <section class="tabPanel active" id="tab-itinerary">
          <div class="tableWrap">
            <table class="planTable">
              <thead>
                <tr>
                  <th style="width:140px">Day</th>
                  <th style="width:110px">Time</th>
                  <th style="width:160px">Park</th>
                  <th>Plan</th>
                  <th style="width:210px">Dining</th>
                  <th style="width:110px">Cost</th>
                  <th style="width:120px">Actions</th>
                </tr>
              </thead>
              <tbody id="itineraryBody"></tbody>
            </table>
          </div>

          <div class="rowActions">
            <button class="btn ghost" id="btnAddItem">+ Add Item</button>
            <button class="btn ghost" id="btnExpandDays">Auto-create Days from Dates</button>
          </div>
        </section>

        <section class="tabPanel" id="tab-packing">
          <div class="split">
            <div class="card inner">
              <h3>Packing Checklist</h3>
              <div class="inlineRow">
                <input id="packNew" type="text" placeholder="Add an item (e.g., ponchos, sunscreen)" />
                <button class="btn" id="packAdd">Add</button>
              </div>
              <div class="checklist" id="packList"></div>
            </div>

            <div class="card inner">
              <h3>Smart Ideas</h3>
              <ul class="bullets" id="packTips"></ul>
            </div>
          </div>
        </section>

        <section class="tabPanel" id="tab-notes">
          <div class="split">
            <div class="card inner">
              <h3>Notes</h3>
              <textarea id="notesText" rows="14" placeholder="Write anything: flight info, stroller notes, priorities, reminders..."></textarea>
            </div>
            <div class="card inner">
              <h3>Quick Reminders</h3>
              <div class="miniCallouts" id="reminders"></div>
            </div>
          </div>
        </section>

        <section class="tabPanel" id="tab-activities">
          <div class="segmented">
            <button class="seg active" data-seg="free">Free</button>
            <button class="seg" data-seg="paid">Costs Money</button>
          </div>

          <div class="activityHelp">
            Tap a checklist item → choose a day/time/park → “Add to Itinerary”. The activity list itself can’t be deleted.
          </div>

          <div class="activityGrid">
            <div class="card inner">
              <h3 id="activityTitle">Free Activities</h3>
              <div class="activityList" id="activityList"></div>
            </div>

            <div class="card inner">
              <h3>Add Selected to Itinerary</h3>
              <div class="field">
                <label for="actDay">Day</label>
                <select id="actDay"></select>
              </div>
              <div class="row">
                <div class="field">
                  <label for="actTime">Time</label>
                  <input id="actTime" type="time" />
                </div>
                <div class="field">
                  <label for="actPark">Park</label>
                  <select id="actPark"></select>
                </div>
              </div>
              <div class="field">
                <label for="actCost">Cost (optional)</label>
                <input id="actCost" type="number" min="0" step="1" placeholder="0" />
              </div>
              <button class="btn" id="btnAddActivityToItinerary">Add to Itinerary</button>
              <div class="subtle small" id="actSelectedInfo">No activity selected.</div>
            </div>
          </div>
        </section>

        <section class="tabPanel" id="tab-dining">
          <div class="diningTop">
            <div class="field">
              <label for="diningPark">Park</label>
              <select id="diningPark"></select>
            </div>
            <div class="field">
              <label for="diningType">Type</label>
              <select id="diningType">
                <option value="quick">Quick Service</option>
                <option value="table">Table Service</option>
              </select>
            </div>
            <div class="field grow">
              <label for="diningSearch">Search</label>
              <input id="diningSearch" type="text" placeholder="Type a restaurant name..." />
            </div>
          </div>

          <div class="diningGrid">
            <div class="card inner">
              <h3>Dining Options</h3>
              <div class="diningList" id="diningList"></div>
            </div>

            <div class="card inner">
              <h3>Add to Itinerary</h3>
              <div class="field">
                <label for="dinDay">Day</label>
                <select id="dinDay"></select>
              </div>
              <div class="row">
                <div class="field">
                  <label for="dinTime">Time</label>
                  <input id="dinTime" type="time" />
                </div>
                <div class="field">
                  <label for="dinPark">Park</label>
                  <select id="dinPark"></select>
                </div>
              </div>
              <div class="field">
                <label for="dinCost">Estimated Cost (optional)</label>
                <input id="dinCost" type="number" min="0" step="1" placeholder="0" />
              </div>
              <button class="btn" id="btnAddDiningToItinerary">Add Dining Plan</button>
              <div class="subtle small" id="dinSelectedInfo">No dining option selected.</div>
            </div>
          </div>
        </section>

        <section class="tabPanel" id="tab-maps">
          <div class="mapsGrid" id="mapsGrid"></div>
          <div class="subtle small">
            Maps are embedded for quick planning. You can still open a full map in a new tab using the “Open Full Map” button.
          </div>
        </section>

        <section class="tabPanel" id="tab-hidden">
          <div class="hiddenTop">
            <div class="field">
              <label for="hiddenPark">Park</label>
              <select id="hiddenPark"></select>
            </div>
            <div class="field grow">
              <label for="hiddenSearch">Search</label>
              <input id="hiddenSearch" type="text" placeholder="Search by location or hint..." />
            </div>
          </div>

          <div class="hiddenGrid">
            <div class="card inner">
              <h3>Hidden Finds Checklist</h3>
              <div class="hiddenList" id="hiddenList"></div>
              <div class="hint">
                Want “82+”? Add entries in <code>SEED_HIDDEN_FINDS</code> in <code>app.js</code>. No other code changes needed.
              </div>
            </div>

            <div class="card inner">
              <h3>Photo Proof</h3>
              <div class="subtle">Select an item to attach a photo from camera or files.</div>
              <div class="photoBox">
                <div id="photoPreview" class="photoPreview">No item selected.</div>
              </div>
              <label class="btn" id="btnPhotoPickLabel">
                Add / Replace Photo
                <input id="photoPick" type="file" accept="image/*" capture="environment" hidden />
              </label>
              <button class="btn ghost" id="btnRemovePhoto">Remove Photo</button>
              <div class="subtle small" id="photoHelp">Photos are stored on this device only.</div>
            </div>
          </div>
        </section>

        <div class="toast" id="toast" role="status" aria-live="polite"></div>
      </section>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>