<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vacation Planner</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Fairy dust overlay -->
  <canvas id="sparkles" aria-hidden="true"></canvas>

  <header class="topbar">
    <div class="brand">
      <div class="brand-badge">✦</div>
      <div class="brand-text">
        <div class="brand-title">Vacation Planner</div>
        <div class="brand-sub">Bright • Simple • Magic-ready</div>
      </div>
    </div>

    <div class="top-actions">
      <button class="btn ghost" id="btnExportBackup" title="Download a backup file (JSON)">Export Backup</button>
      <label class="btn ghost filelike" title="Import a backup file (JSON)">
        Import Backup
        <input type="file" id="fileImportBackup" accept="application/json" hidden />
      </label>
      <button class="btn" id="btnExportICS" title="Exports your itinerary to a calendar file (.ics)">Export Calendar</button>
      <button class="btn danger ghost" id="btnReset" title="Reset everything on this device">Reset</button>
    </div>
  </header>

  <main class="layout">
    <!-- LEFT: Trip Snapshot -->
    <aside class="panel snapshot">
      <h2>Trip Snapshot</h2>

      <div class="field">
        <label for="tripName">Trip Name</label>
        <input id="tripName" type="text" placeholder="Family Vacation" />
      </div>

      <div class="row2">
        <div class="field">
          <label for="startDate">Start</label>
          <input id="startDate" type="date" />
        </div>
        <div class="field">
          <label for="endDate">End</label>
          <input id="endDate" type="date" />
        </div>
      </div>

      <div class="field">
        <label for="resortSelect">Resort / Hotel</label>
        <select id="resortSelect"></select>
      </div>

      <div class="row2">
        <div class="field">
          <label for="partySize">Party Size</label>
          <input id="partySize" type="number" min="1" max="30" value="4" />
        </div>
        <div class="field">
          <label for="budget">Budget ($)</label>
          <input id="budget" type="number" min="0" step="1" value="2500" />
        </div>
      </div>

      <div class="field">
        <label for="welcomeMessage">Welcome Message</label>
        <input id="welcomeMessage" type="text" placeholder="Welcome! Let’s plan your trip ✨" />
      </div>

      <div class="miniStats">
        <div class="miniCard">
          <div class="miniLabel">Dates</div>
          <div class="miniValue" id="statDates">—</div>
        </div>
        <div class="miniCard">
          <div class="miniLabel">Resort</div>
          <div class="miniValue" id="statResort">—</div>
        </div>
        <div class="miniCard">
          <div class="miniLabel">Party</div>
          <div class="miniValue" id="statParty">—</div>
        </div>
      </div>

      <div class="help">
        <div class="helpTitle">Tip</div>
        <div class="helpText">
          Everything auto-saves on this device. Use <b>Export Backup</b> to move it to another computer.
        </div>
      </div>
    </aside>

    <!-- RIGHT: Main planner -->
    <section class="panel main">
      <div class="hero">
        <div class="heroTop">
          <div class="heroTitleWrap">
            <h1 id="heroWelcome">Welcome! ✨</h1>
            <div class="heroMeta">
              <span class="pill" id="pillDates">Dates: —</span>
              <span class="pill" id="pillResort">Resort: —</span>
              <span class="pill" id="pillParty">Party: —</span>
            </div>
          </div>
        </div>

        <p class="heroSubtitle">
          Build your days, pack your stuff, keep activities, dining, maps, and hidden finds — then export your calendar.
        </p>

        <nav class="tabs" role="tablist" aria-label="Planner tabs">
          <button class="tab active" data-tab="itinerary" role="tab">Itinerary</button>
          <button class="tab" data-tab="packing" role="tab">Packing</button>
          <button class="tab" data-tab="notes" role="tab">Notes</button>
          <button class="tab" data-tab="activities" role="tab">Activities</button>
          <button class="tab" data-tab="dining" role="tab">Dining</button>
          <button class="tab" data-tab="maps" role="tab">Maps</button>
          <button class="tab" data-tab="hidden" role="tab">Hidden Finds</button>
        </nav>
      </div>

      <!-- TAB: ITINERARY -->
      <section class="tabPanel active" id="tab-itinerary">
        <div class="toolbar">
          <div class="tool">
            <label>Filter Park</label>
            <div class="toolRow">
              <select id="itFilterPark"></select>
              <button class="btn ghost" id="btnClearParkFilter">Clear</button>
            </div>
          </div>

          <div class="tool">
            <label>Add Park Day</label>
            <div class="toolRow">
              <select id="addDayPark"></select>
              <button class="btn" id="btnAddDay">+ Add</button>
            </div>
            <div class="tinyHint">Adds a new itinerary row for the selected park (uses your Start date).</div>
          </div>

          <div class="tool wide">
            <label>Budget Used</label>
            <div class="budgetBar">
              <div class="budgetFill" id="budgetFill"></div>
            </div>
            <div class="budgetText" id="budgetText">$0 used</div>
          </div>
        </div>

        <div class="tableWrap">
          <table class="table" id="itineraryTable">
            <thead>
              <tr>
                <th class="colDay">Day</th>
                <th class="colTime">Time</th>
                <th class="colPark">Park</th>
                <th class="colPlan">Plan</th>
                <th class="colDiningType">Dining Type</th>
                <th class="colRestaurant">Restaurant</th>
                <th class="colCost">Cost ($)</th>
                <th class="colActions"></th>
              </tr>
            </thead>
            <tbody id="itineraryBody"></tbody>
          </table>
        </div>

        <div class="belowActions">
          <button class="btn ghost" id="btnAddRow">+ Add Custom Row</button>
          <div class="tinyHint">
            Calendar export uses Start date + “Day #” (Day 1 = Start date, Day 2 = next day, etc).
          </div>
        </div>
      </section>

      <!-- TAB: PACKING -->
      <section class="tabPanel" id="tab-packing">
        <div class="split">
          <div class="card">
            <h3>Packing Checklist</h3>
            <div class="toolRow">
              <input id="packingNew" type="text" placeholder="Add an item (ex: ponchos, sunscreen)" />
              <button class="btn" id="btnPackingAdd">Add</button>
            </div>
            <div class="list" id="packingList"></div>
          </div>

          <div class="card">
            <h3>Smart Suggestions</h3>
            <p class="muted">
              These are just starter ideas. Check them off, add your own, and export your plan anytime.
            </p>
            <ul class="bullets">
              <li>Portable charger / battery bank</li>
              <li>Refillable water bottle</li>
              <li>Light jacket (evenings can be cool)</li>
              <li>Band-aids / blister pads</li>
              <li>Rain ponchos</li>
              <li>Snacks for the kids</li>
              <li>Sunscreen + sunglasses</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- TAB: NOTES -->
      <section class="tabPanel" id="tab-notes">
        <div class="card">
          <h3>Notes</h3>
          <textarea id="notesText" rows="10" placeholder="Write anything: reminders, must-do rides, budgets, stroller notes, etc..."></textarea>
          <div class="tinyHint">Auto-saves as you type.</div>
        </div>
      </section>

      <!-- TAB: ACTIVITIES -->
      <section class="tabPanel" id="tab-activities">
        <div class="subtabs">
          <button class="subtab active" data-subtab="free">Free</button>
          <button class="subtab" data-subtab="paid">Costs Money</button>
        </div>

        <div class="card">
          <div class="toolbar compact">
            <div class="tool">
              <label>Park</label>
              <select id="actParkFilter"></select>
            </div>
            <div class="tool wide">
              <label>Search</label>
              <input id="actSearch" type="text" placeholder="Search activities..." />
            </div>
          </div>

          <div class="tinyHint">Check items you want, then tap <b>Add to Itinerary</b> on any activity.</div>

          <div id="activitiesList" class="gridList"></div>
        </div>
      </section>

      <!-- TAB: DINING -->
      <section class="tabPanel" id="tab-dining">
        <div class="card">
          <div class="toolbar compact">
            <div class="tool">
              <label>Park</label>
              <select id="dinPark"></select>
            </div>
            <div class="tool">
              <label>Type</label>
              <select id="dinType">
                <option value="quick">Quick Service</option>
                <option value="table">Table Service</option>
              </select>
            </div>
            <div class="tool wide">
              <label>Search</label>
              <input id="dinSearch" type="text" placeholder="Search restaurants..." />
            </div>
          </div>

          <div class="tinyHint">
            Pick a restaurant and click <b>Add to Itinerary</b>. On the Itinerary tab, the restaurant dropdown also changes automatically by park + dining type.
          </div>

          <div id="diningList" class="gridList"></div>

          <div class="divider"></div>

          <h3>Add Your Own Restaurant (optional)</h3>
          <div class="toolRow">
            <input id="customRestaurantName" type="text" placeholder="Restaurant name" />
            <select id="customRestaurantPark"></select>
            <select id="customRestaurantType">
              <option value="quick">Quick Service</option>
              <option value="table">Table Service</option>
            </select>
            <button class="btn" id="btnAddCustomRestaurant">Add</button>
          </div>
          <div class="tinyHint">This saves into your plan and will appear everywhere (including itinerary dropdowns).</div>
        </div>
      </section>

      <!-- TAB: MAPS -->
      <section class="tabPanel" id="tab-maps">
        <div class="card">
          <h3>Maps (Embedded)</h3>
          <div class="tinyHint">These are embedded Google Maps views. They should stay on-screen (no redirects).</div>
          <div class="mapGrid" id="mapGrid"></div>
        </div>
      </section>

      <!-- TAB: HIDDEN FINDS -->
      <section class="tabPanel" id="tab-hidden">
        <div class="split">
          <div class="card">
            <div class="toolbar compact">
              <div class="tool">
                <label>Park</label>
                <select id="hmPark"></select>
              </div>
              <div class="tool wide">
                <label>Search</label>
                <input id="hmSearch" type="text" placeholder="Search hidden finds..." />
              </div>
            </div>

            <div class="tinyHint">
              82 preloaded “hidden finds” (editable). Check the box next to each when you find it.
            </div>

            <div class="list" id="hmList"></div>
          </div>

          <div class="card">
            <h3>Selected Find</h3>
            <div id="hmDetailEmpty" class="muted">No item selected.</div>

            <div id="hmDetail" class="hmDetail hidden">
              <div class="field">
                <label>Title</label>
                <input id="hmTitle" type="text" />
              </div>
              <div class="field">
                <label>Hint</label>
                <textarea id="hmHint" rows="4"></textarea>
              </div>

              <div class="row2">
                <div class="field">
                  <label>Status</label>
                  <select id="hmStatus">
                    <option value="not_found">Not found</option>
                    <option value="found">Found</option>
                  </select>
                </div>
                <div class="field">
                  <label>Checklist</label>
                  <div class="checkRow">
                    <input id="hmChecked" type="checkbox" />
                    <span>Mark as found</span>
                  </div>
                </div>
              </div>

              <div class="divider"></div>

              <h4>Photo Proof</h4>
              <div class="toolRow">
                <label class="btn ghost filelike">
                  Add / Replace Photo
                  <input type="file" id="hmPhoto" accept="image/*" hidden />
                </label>
                <button class="btn danger ghost" id="btnRemoveHmPhoto">Remove Photo</button>
              </div>

              <div class="photoBox">
                <img id="hmPhotoPreview" alt="Hidden find photo" />
                <div id="hmPhotoEmpty" class="muted">No photo yet.</div>
              </div>

              <div class="tinyHint">
                Photos are saved to your browser storage. Huge photos can fill storage — smaller pics work best.
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="footer">
        Saved on this device. Export anytime.
      </footer>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>